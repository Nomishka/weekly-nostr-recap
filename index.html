<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nostr Weekly Recaps</title>
    <meta name="description" content="Weekly human-curated recaps from the Nostr ecosystem." />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #0b0f14;
            --card: #121826;
            --text: #e6e8eb;
            --muted: #9aa4b2;
            --accent: #7c9cff;
            --accent-soft: rgba(124, 156, 255, 0.15);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Inter', system-ui, sans-serif;
            background: radial-gradient(1200px 600px at 20% -10%, #16203a, transparent), var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        a {
            color: var(--accent);
            text-decoration: none;
        }

        header {
            padding: 4rem 1.5rem 3rem;
            text-align: center;
            max-width: 900px;
            margin: auto;
        }

        header h1 {
            font-size: clamp(2.2rem, 5vw, 3.2rem);
            margin-bottom: 0.5rem;
        }

        header p {
            color: var(--muted);
            max-width: 640px;
            margin: 0.5rem auto 2rem;
        }

        .cta {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 999px;
            background: var(--accent-soft);
            color: var(--accent);
            font-weight: 600;
        }

        main {
            max-width: 1100px;
            margin: auto;
            padding: 2rem 1.5rem 4rem;
        }

        .recaps {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), transparent), var(--card);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.45);
        }

        .card h3 {
            margin-top: 0;
            font-size: 1.25rem;
        }

        .meta {
            font-size: 0.85rem;
            color: var(--muted);
            margin-bottom: 0.75rem;
        }

        .tags {
            margin-top: 1rem;
        }

        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 0.3rem 0.6rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.08);
            margin-right: 0.4rem;
            color: var(--muted);
        }

        footer {
            border-top: 1px solid rgba(255, 255, 255, 0.08);
            padding: 2rem 1.5rem;
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--accent);
        }

        @media (max-width: 600px) {
            header {
                padding-top: 3rem;
            }
        }

        /* Navbar */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(11, 15, 20, 0.75);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            height: 120px;
        }



        .nav-inner {
            max-width: 1100px;
            margin: auto;
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: inherit
        }


        .navbar-logo {
            height: 90px;
            width: auto;

        }


        .nav-links {
            list-style: none;
            display: flex;
            gap: 1.25rem;
            margin: 0;
            padding: 0;
        }


        .nav-links a {
            color: var(--muted);
            font-weight: 500;
            font-size: 0.95rem;
        }


        .nav-links a:hover {
            color: var(--text);
        }


        @media (max-width: 600px) {
            .nav-links {
                gap: 0.75rem;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-inner">
            <img class="navbar-logo" width="50" height="auto" src="./images/nostr_recap_logo.png"></img>
            <ul class="nav-links">
                <li><a href="#recaps">Recaps</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#">RSS</a></li>
                <li><a href="#">Zap ⚡</a></li>
            </ul>
        </div>
    </nav>
    <header>
        <h1>Weekly Nostr Recap</h1>
        <p>Human-curated weekly highlights from the Nostr ecosystem — apps, dev updates, culture, and signal over noise.
        </p>
        <a class="cta" href="#recaps">Read latest recap</a>
    </header>

    <main>
        <section id="recaps" class="recaps">

            <!-- Recap card -->
            <!-- <article class="card">
                <div class="meta">Week 01 · Jan 2026</div>
                <h3>Big client updates & growing Nostr culture</h3>
                <p>Major UI improvements across clients, more creator tools, and thoughtful debates on decentralization
                    this week.</p>
                <a href="#">Read full recap →</a>
                <div class="tags">
                    <span class="tag">Clients</span>
                    <span class="tag">Culture</span>
                    <span class="tag">Dev</span>
                </div>
            </article> -->

            <!-- Copy this card for each week -->
            <!-- <article class="card">
                <div class="meta">Week 52 · Dec 2025</div>
                <h3>Year-end reflections & tools that shipped</h3>
                <p>A calm but meaningful week: reflections, long-form posts, and solid infrastructure progress.</p>
                <a href="#">Read full recap →</a>
                <div class="tags">
                    <span class="tag">Reflection</span>
                    <span class="tag">Infra</span>
                </div>
            </article> -->

        </section>
    </main>

    <footer>
        <p>Published weekly on Nostr · Built with ❤️ by <a
                href="https://njump.me/npub19hs0lg9vyd0lghayeju5fnflx0melawjrl8etuqln9gkhd4mwtxq2t5jcn">Nomishka</a></p>
        <p>
            <a href="https://njump.me/npub1etjm06353tl0cnqs9wmmzfwyj283z3ee5facwlrte7l957fgqwzqsznr68">Nostr profile</a>
            ·
            <a href="https://github.com/Nomishka/weekly-nostr-recap">GitHub</a> .
        </p>
    </footer>
    <script>
        const RELAYS = [
            "wss://relay.damus.io",
            "wss://nostr.wine",
            "wss://relay.snort.social"
        ];

        const AUTHOR_PUBKEY = "2de0ffa0ac235ff45fa4ccb944cd3f33f79ff5d21fcf95f01f99516bb6bb72cc"; // replace with your hex pubkey
        const recapsContainer = document.getElementById("recaps");

        // Only show posts with these hashtags
        const FILTER_TAGS = ["NostrRecap", "GrowNostr"];

        RELAYS.forEach(relayUrl => {
            const ws = new WebSocket(relayUrl);

            ws.onopen = () => {
                ws.send(JSON.stringify([
                    "REQ",
                    "yakihonne-recaps",
                    {
                        kinds: [30023],
                        authors: [AUTHOR_PUBKEY],
                        limit: 100 // fetch more so filtering works
                    }
                ]));
            };

            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);

                if (data[0] === "EVENT") {
                    const note = data[2];

                    // ✅ Filter by hashtags
                    const noteTags = note.tags
                        .filter(t => t[0] === "t") // only 't' tags
                        .map(t => t[1]);

                    const hasTag = FILTER_TAGS.some(tag => noteTags.includes(tag));
                    if (hasTag) renderRecap(note);
                }
            };
        });

        function renderRecap(note) {
            const titleTag = note.tags.find(t => t[0] === "title");
            const title = titleTag ? titleTag[1] : "Weekly Recap";

            const articleId = note.id;
            // Find the Yakihonne NADDR link from tags
            const naddrTag = note.tags.find(t => t[0] === "r"); // 'r' = relay/NADDR
            const yakihonneUrl = naddrTag
                ? `https://yakihonne.com/article/${naddrTag[1]}`
                : "#"; // fallback if not found


            const card = document.createElement("article");
            card.className = "card";
            card.innerHTML = `
        <div class="meta">Yakihonne · Weekly Recap</div>
        <h3>${title}</h3>
        <a href="${yakihonneUrl}" target="_blank">Read on Yakihonne →</a>
    `;

            // Prepend latest first
            recapsContainer.prepend(card);
        }
    </script>



</body>

</html>